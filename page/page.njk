{% extends "template.njk" %}
{% from "cica/modal/macro.njk" import govukModalDialogue %}

{% block pageTitle %}Claim criminal injuries compensation - GOV.UK{% endblock %}
{% block head %}
    <!--[if !IE 8]><!-->
    <link href="/govuk-frontend/all.css" rel="stylesheet" />
    <!--<![endif]-->

    {# For Internet Explorer 8, you need to compile specific stylesheet #}
    {# see https://github.com/alphagov/govuk-frontend/blob/master/docs/installation/supporting-internet-explorer-8.md #}
    <!--[if IE 8]>
    <link href="/govuk-frontend/all-ie8.css" rel="stylesheet" />
    <![endif]-->

    {# For older browsers to allow them to recognise HTML5 elements such as `<header>` #}
    <!--[if lt IE 9]>
    <script src="/html5-shiv/html5shiv.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="/dist/css/accessible-autocomplete.css" />
    <link rel="stylesheet" href="/dist/css/accessible-autocomplete-wrapper.css" />
{% endblock %}

{% block bodyStart %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ gaTrackingId }}"></script>
    <script nonce="{{ nonce }}">
        window.dataLayer = window.dataLayer || [];
        function gtag(){
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', '{{ gaTrackingId }}');
    </script>
{% endblock %}

{% block header %}
    {{govukHeader({
        serviceName: "Claim criminal injuries compensation",
        serviceUrl: "/start-page"
    })}}

    {% from "phase-banner/macro.njk" import govukPhaseBanner %}
    {{ govukPhaseBanner({
      tag: {
          text: "beta"
      },
      html: 'This is a new service â€“ your <a class="govuk-link" href="https://www.surveymonkey.co.uk/r/YourFeedbackPB" target="_blank">feedback <span class="govuk-visually-hidden">(opens in new window)</span></a> will help us to improve it.',
      classes: 'govuk-width-container'
    }) }}
    <div class="govuk-width-container">
        {% block innerHeader %}
        {% endblock %}
    </div>
{% endblock %}

{% block beforeContent %}
{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% block innerContent %}
            {% endblock %}
        </div>
    </div>
{% endblock %}

{% block bodyEnd %}
    {# Run JavaScript at end of the <body>, to avoid blocking the initial render. #}
    <script src="/govuk-frontend/all.js"></script>
    <script nonce="{{ nonce }}">window.GOVUKFrontend.initAll()</script>
    <script src="/dist/js/autocomplete.min.js"></script>
    <script src="/dist/js/bundle.js"></script>
{% endblock %}

{% block footer %}
    {{ govukFooter({
        meta: {
            items: [
                {
                    href: "/cookies",
                    text: "Cookies"
                },
                {
                    href: "https://www.gov.uk/guidance/cica-privacy-notice",
                    text: "Privacy notice"
                },
                {
                    href: "/contact-us",
                    text: "Contact us"
                }
            ]
        }
    }) }}

    {% set sessionTimeoutHeading %}
        Your session is due to expire in <span class="govuk-modal__time-remaining">5 minutes</span>
    {% endset %}
    {% set sessionTimeoutDescription %}
        <p class="govuk-body">You have not done anything on the service for a while.</p>
        <p class="govuk-body">Your session will end in <span class="govuk-modal__time-remaining">5 minutes</span> if you do not do anything on the page. You'll need to start your application again if that happens.</p>
    {% endset %}

    {% set sessionEndedHeading %}
        Your session has ended
    {% endset %}
    {% set sessionEndedDescription %}
        <p class="govuk-body">You have not done anything on the service for a while.</p>
        <p class="govuk-body">Your session has ended. You'll need to start your application again.</p>
    {% endset %}

    {% call govukModalDialogue({
        id: "session-timeout",
        role: "alertdialog",
        hasCloseButton: "false",
        heading: {
            html: sessionTimeoutHeading
        },
        description: {
            html: sessionTimeoutDescription
        }
    }) %}
        {{ govukButton({
            text: "Resume application",
            type: "button",
            classes: "govuk-modal-dialogue__continue"
        }) }}
        <!-- <a href="{{ basePath }}" class="govuk-modal-dialogue__cancel govuk-body govuk-link govuk-link--no-visited-state">Start again</a> -->
    {% endcall %}

    {% call govukModalDialogue({
        id: "session-ended",
        role: "alertdialog",
        hasCloseButton: "false",
        heading: {
            html: sessionEndedHeading
        },
        description: {
            html: sessionEndedDescription
        }
    }) %}
        {{ govukButton({
            text: "Start again",
            type: "button",
            href: "/apply"
        }) }}
    {% endcall %}
{% endblock %}
